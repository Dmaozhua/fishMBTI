<!--pages/result/result.wxml-->
<view class="container">

  <!-- ç»“æœå†…å®¹ -->
  <view class="result-content" wx:if="{{resultData}}">
    <text class="result-title">{{resultData.title || resultData.type}}</text>
    
    <!-- MBTIç±»å‹å›¾ç‰‡ -->
    <view class="result-image-container" wx:if="{{resultData.img}}">
      <image class="result-image" src="{{resultData.img}}" mode="aspectFit" lazy-load="true" bindload="onImageLoad" binderror="onImageError" wx:if="{{!imageLoadError}}"></image>
      <!-- å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶çš„å ä½ç¬¦ -->
      <view class="image-placeholder" wx:if="{{imageLoadError}}">
        <text class="placeholder-icon">ğŸ£</text>
        <text class="placeholder-text">{{resultData.type || 'MBTI'}}</text>
      </view>
    </view>
    
    <text wx:if="{{resultData.resultPercentage}}" class="result-percentage {{resultData.resultPercentage <= 15 ? 'rare-effect' : ''}}">ç¨€æœ‰å æ¯”ï¼š{{resultData.resultPercentage}}%</text>
    
    <!-- äººæ ¼ç”»åƒ -->
    <view class="section-container">
      <text class="section-title">ğŸ‘¤ äººæ ¼ç”»åƒ</text>
      <text class="result-desc">{{resultData.description || resultData.desc}}</text>
    </view>
    
    <!-- AIå»ºè®® -->
    <view class="section-container" wx:if="{{resultData.suggestion}}">
      <text class="section-title">ğŸ§  AIå»ºè®®</text>
      <text class="result-desc">{{resultData.suggestion}}</text>
    </view>
    
    <!-- è£…å¤‡æ¨è -->
    <view class="recommend-section">
      <text class="recommend-title">ğŸ¯ è£…å¤‡æ¨è</text>
      <block wx:if="{{resultData.equip}}">
        <text class="result-desc">{{resultData.equip}}</text>
      </block>
      <block wx:else>
        <block wx:for="{{resultData.recommend}}" wx:key="index">
          <view class="recommend-item">{{item}}</view>
        </block>
      </block>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button class="action-btn secondary" bindtap="backToHome">è¿”å›ä¸»é¡µ</button>
      <button class="action-btn primary share-btn" bindtap="shareResult" open-type="share">âœ¨ åˆ†äº«ç»“æœ</button>
    </view>
  </view>

  <!-- æ— æ•°æ®æç¤º -->
  <view class="no-data" wx:else>
    <text class="no-data-text">æš‚æ— æµ‹è¯•ç»“æœ</text>
    <button class="result-btn" bindtap="backToHome">è¿”å›é¦–é¡µ</button>
  </view>
</view>